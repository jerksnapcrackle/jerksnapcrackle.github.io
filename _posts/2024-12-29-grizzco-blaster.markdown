---
layout: post
title:  "Grizzco Blaster"
date:   2024-12-29 04:23:03 +0900
categories: jekyll update
---

![splatoon3-grizzco-blaster](/assets/grizzco-blaster//splatoon3-grizzco-blaster.png)

A cool-looking Grizzco Blaster can be divided into three parts:
1. **glowing pill case** : the four yellow/orange tube cases on the top of the weapon
2. **water spray mechanism** : ultimately, it's a water gun :thinking_face:
3. **shell** : of cause, it should look like the _Grizzco Blaster_ in appearance

In the following three sections, I will describe these parts in detail.

## 1. Glowing Pill Case

Although the cases do not glow in the game, I think a glowing case is cool-looking.

![pillcase](/assets/grizzco-blaster/pillcase.png)

> TODO


## 2. Water Spray Mechanism

The water spray part consists of
+ **spray nozzle**
+ **solenoid valve** : [ATS04220D valve](https://www.sengoku.co.jp/mod/sgk_cart/detail.php?code=EEHD-68GC)
+ **hose and connectors**
+ **boost converter module** : ~~MT3608~~ [NJW4131](https://akizukidenshi.com/catalog/g/g107406/)
+ **buck converter module** : [LXDC55](https://akizukidenshi.com/catalog/g/g109981/)
+ **MOSFET** : [2SK4017](https://akizukidenshi.com/catalog/g/g107597/)
+ **MCU** : [XIAO ESP32C6](https://akizukidenshi.com/catalog/g/g129481/)
+ **water supply** : my shower
+ (optional)**pressure regulator**

> TODO : topology diagram

### How does it work ?

The MCU generates a high voltage to open the MOSFET.
Then the MOSFET enables the connection from power supply to solenoid valve.
When the solenoid valve is turned on, it will open the valve by the electromagnet.
The water is then sprayed out through the nozzle.

Therefore, we can control the water spray by generating a high or low voltage. 
When the trigger is pushed down : 
+ For a single-shot weapon, e.g. _Range Blaster_, signal will be set to high for a short time(about $100\text{ms}$), then to low;
+ For an auto-shot weapon, e.g. _Grizzco Blaster_, signal will be set to high and low repeatly, until the trigger is released. The repeating freqency should be lower than the valve response time to make sure it has enough time to turn on/off. Fortunately, although the _Grizzco Blaster_ fires fast($\text{period} \approx 150\text{ms}$), it is much slower than the valve.

The solenoid valve, however, may be difficult to open when the water pressure in hose is too high. In this case, we can connect a pressure regulator before the water supply. Then adjust the output pressure until the valve can open and close smoothly

### Prototype


The power of valve was generated by converting a 7.2V Li-ion battery into 12V.

The MT3608 I bought can only output 270mA current according to my test, and the workable pressure threshold was 0.2MPa. However, the rated current of valve is 400mA. So I changed to NJW4131 which can output 1~1.4A current. Now I can higher the threashold to 0.3MPa. This dramatically improved the power of waterflow.

BTW, the recoil was really strong, maybe I don't need an additional recoil generator.

Also, a better installation for valve is keeping the electromagnet at the buttom(picture is a bad example), which makes it turn on/off more smoothly.



## 3. Shell

## References

1. [Getting Started with Seeed Studio XIAO ESP32C6](https://wiki.seeedstudio.com/xiao_esp32c6_getting_started/)
2. [MOSFETの使い方(2SK4017)](https://nobita-rx7.hatenablog.com/entry/27544812)
3. [蛇口にホースをワンタッチで取り付け！蛇口ニップルの選び方](https://www.takagi-member.jp/contents/detail/367)
4. [にんにく太郎さんのGrizzco Blaster絵](https://www.pixiv.net/artworks/84511373)
